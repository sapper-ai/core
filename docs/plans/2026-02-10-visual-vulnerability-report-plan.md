## Invicti-Style Visual Vulnerability Report Plan

### Goal
Generate a self-contained HTML vulnerability report from `scripts/run-real-env-mcp-scan.mjs` with clear severity hierarchy:
- Critical (red) at top
- Medium (yellow) in middle
- Low (gray) at bottom

The scan command should produce Markdown (existing), JSON (machine-readable), and HTML (visual) in one run.

### Scope
1. Keep current discovery and scanning pipeline unchanged.
2. Add a normalized report model from `scanResults`.
3. Add severity mapping for visual presentation.
4. Add self-contained HTML renderer (inline CSS + inline JS).
5. Emit report files in `docs/reports/`.

### Severity Mapping
Derived from current risk and decision:
- critical: `risk >= 0.9`
- high: `0.7 <= risk < 0.9`
- medium: `0.5 <= risk < 0.7`
- low: `0 < risk < 0.5`
- info: `risk === 0`

Color tokens:
- critical: `#DC2626`
- high: `#F97316`
- medium: `#EAB308`
- low: `#6B7280`
- info: `#9CA3AF`

### Data Model
Create normalized record per finding:
- id, name, type, source
- action, risk, confidence, severity
- reasons, suspiciousSignals, educationalContext

Create report payload:
- metadata: generatedAt, discoveredFiles, scannedTargets, falseNegatives, falsePositives
- thresholds: riskThreshold, blockMinConfidence
- summary: severity counts + action counts
- findings: sorted by severity then risk then name

### HTML Layout
1. Header (title, generated time, totals)
2. Summary cards (Critical/High/Medium/Low/Info)
3. Findings table (sortable by visual order)
4. Detail section per finding (`<details>` block)
5. FP/FN summary panel

### Accessibility and UX
- Use badges + text labels (not color-only)
- Responsive layout for mobile/tablet
- Print-friendly `@media print`
- Escape all dynamic text before HTML injection

### Deliverables
1. Updated `scripts/run-real-env-mcp-scan.mjs`
2. JSON report file: `docs/reports/2026-02-10-real-env-mcp-scan.json`
3. HTML report file: `docs/reports/2026-02-10-real-env-mcp-scan.html`
4. Existing Markdown report kept intact

### Verification
1. Run script successfully and confirm 3 report files are generated.
2. Run TypeScript typecheck/build for repository.
3. Ensure no raw secret patterns are leaked in rendered HTML by preserving redacted surface usage.
